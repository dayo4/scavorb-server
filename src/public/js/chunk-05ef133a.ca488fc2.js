(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05ef133a"],{"008b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Container",{attrs:{ownID:"MC-NewPosts",noSideNav:!0}},[n("div",{staticClass:"flex j-c-center wrap"},[n("div",{staticClass:"xs12 md9"},[n("Composer",{ref:"composer"})],1),n("div",{staticClass:"xs12 md3 px-6"},[n("button",{staticClass:"btn icon-picture my-8",on:{click:t.triggerImageTransformer}},[t._v("Add Featured Image")]),n("div",{staticClass:"t-blue-grey--2 mb-8"},[t._v("This is the main post image displayed at the top of the post page.")]),n("ImageTransformer",{ref:"imageTransformer",attrs:{fieldName:"featuredImage",cropWidth:600,cropHeight:350},on:{ready:t.addPostImage}}),n("div",{staticClass:"PostImage"},[t.postImageSrc?n("img",{ref:"postImage",attrs:{src:t.postImageSrc.match(/^data:/)?t.postImageSrc:t.$postBaseUrl+t.postImageSrc,alt:"post image"}}):t._e()]),n("hr"),n("div",{staticClass:"t-blue-grey--2 mt-10"},[t._v('You can save, edit and update your content all you want. Hit the "Publish" button whenever you are ready to go live with it.')]),n("button",{staticClass:"btn icon-publish my-9"},[t._v("PUBLISH")])],1)]),n("div",{staticClass:"Actions flex j-c-center noselect my-5"},[n("button",{ref:"saveBtn",staticClass:"icon-floppy btn cyan-gradient-btn",attrs:{id:"saveBtn"},on:{click:t.startProcessing}},[t._v(t._s(t.currentPost_id?"UPDATE":"SAVE NEW"))]),n("span",{ref:"previewBtn",staticClass:"btn cyan-gradient-btn",on:{click:function(e){return t.preview(t.currentPost_id)}}},[t._v("PREVIEW")])])])},a=[],i=(n("d3b7"),n("d4ec")),s=n("bee2"),o=n("262e"),c=n("2caf"),l=n("9ab4"),u=n("60a3"),d=n("c152"),f=n("8205"),p=n("2112"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"Post_Title_Container px-5 pt-5 mb-0"},[n("div",{staticClass:"t-white bold-4 font-6"},[t._v("TITLE :")]),n("div",{ref:"titleInput",staticClass:"Post_Title bg-white br4 p-5",attrs:{contenteditable:"true",placeholder:"Enter Post Title"},on:{input:t.setTitle,paste:t.plainText}}),t.errors&&t.errors["Title"]?n("div",{staticClass:"font-3 p-1 bg-white t-red br1 ml-8",class:t.errors&&t.errors["Title"]?"vibrate":"",staticStyle:{width:"95%"}},[t._v("Error: "+t._s(t.showError("Title")))]):t._e(),n("div",{staticClass:"t-white bold-4 font-6"},[t._v("SLUG :")]),n("div",{ref:"slugInput",staticClass:"Post_Title bg-white br4 p-5",attrs:{contenteditable:"true",placeholder:"Enter Post Permalink"},on:{input:t.setSlug}})]),n("TextEditor",{attrs:{id:"main-ql-editor",initialContent:t.contentToEdit?t.contentToEdit.content:null,config:t.editorConfig,enableImage:!0},on:{contentUpdated:t.setContent}})],1)},m=[],h=(n("4de4"),n("4160"),n("a15b"),n("ac1f"),n("466d"),n("5319"),n("1276"),n("159b"),function(t){Object(o["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.title="",t.slug="",t.content="",t.errors=null,t}return Object(s["a"])(n,[{key:"mounted",value:function(){this.contentToEdit&&(this.title=this.$refs.titleInput.textContent=this.contentToEdit.title,this.slug=this.$refs.slugInput.textContent=this.contentToEdit.slug)}},{key:"setTitle",value:function(t){this.title=t.target.textContent,this.errors&&(this.errors["Title"]="")}},{key:"setSlug",value:function(t){this.slug=t.target.textContent,this.errors&&(this.errors["Slug"]="")}},{key:"setContent",value:function(t){this.content=t}},{key:"showError",value:function(t){if(this.errors)return this.errors["Title"]}},{key:"validate",value:function(){var t=[{fieldName:"Title",data:f["j"].sanitize(this.title),rules:{required:!0,min:10,max:100}},{fieldName:"Slug",data:f["j"].sanitize(this.slug),rules:{required:!0,min:5,max:100}},{fieldName:"Content",data:this.content,rules:{required:!0}}];return f["j"].validate(t)}},{key:"init",value:function(){this.validate()&&f["g"].create("#saveBtn",{action:this.captureContentImages}),this.errors=f["j"].getErrors(),f["h"].abort(),this.errors["Content"]&&f["f"].error(this.errors["Content"]),this.errors["Slug"]&&f["f"].error(this.errors["Slug"])}},{key:"captureContentImages",value:function(){f["h"].add("Intializing...");var t=document.getElementById("main-ql-editor"),e=t.getElementsByTagName("img"),n=Array.prototype.filter.call(e,(function(t){return t.src.match(/^data:/)}));if(n.length>0){var r=[];f["h"].add("Uploading Images...");var a=this;Array.prototype.forEach.call(n,(function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height),i.canvas.toBlob((function(e){var i=new File([e],"filename",{type:"image/jpeg"}),s=new FormData;s.append("contentImages",i),d["f"].$compose.uploadImages(s).then((function(e){if(e){var i=a.$postBaseUrl+e.imageUrl;t.src=i,r.push(e.imageUrl),r.length===n.length&&a.saveContent(r)}else r.length>0&&d["f"].$compose.removeImages(r),f["h"].abort()}))}),"image/jpeg")}))}else f["h"].add("Saving content..."),this.saveContent()}},{key:"saveContent",value:function(t){this.currentPost_id?d["f"].$compose.update({title:this.title,slug:this.slug.replace(/\s{2,}/g," ").split(" ").join("-").toLowerCase(),content:this.content,contentImages:t}).then((function(){f["g"].destroy("#saveBtn")})):d["f"].$compose.newPost({title:this.title,slug:this.slug.replace(/\s{2,}/g," ").split(" ").join("-").toLowerCase(),content:this.content,contentImages:t}).then((function(){f["g"].destroy("#saveBtn")}))}},{key:"plainText",value:function(t){f["c"].pasteAsPlainText(t)}}]),n}(u["c"]));h=Object(l["a"])([Object(u["a"])({components:{TextEditor:function(){return n.e("chunk-08c40e1a").then(n.bind(null,"f426"))}},computed:{user:function(){return d["b"].user},editorConfig:function(){return d["f"].$compose.editorConfig},currentPost_id:function(){return d["f"].$compose.currentPost_id},contentToEdit:function(){return d["f"].$compose.contentToEdit}}})],h);var g=h,b=g,C=(n("334d"),n("2877")),y=Object(C["a"])(b,v,m,!1,null,null,null),j=y.exports,w=function(t){Object(o["a"])(n,t);var e=Object(c["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"preview",value:function(t){if(t){var e=this.$router.resolve({path:"posts-preview/"+t});window.open(e.href,"_blank")}else f["f"].info("You have to Save content first before you can preview.")}},{key:"triggerImageTransformer",value:function(){this.$refs.imageTransformer.trigger()}},{key:"addPostImage",value:function(t,e){d["f"].$compose.setFeaturedImage({postImageSrc:e,formData:t})}},{key:"startProcessing",value:function(){this.$refs.composer.init()}}]),n}(u["c"]);w=Object(l["a"])([Object(u["a"])({components:{Container:p["a"],Composer:j,ImageTransformer:function(){return n.e("chunk-2787d52c").then(n.bind(null,"4e54"))}},computed:{currentPost_id:function(){return d["f"].$compose.currentPost_id},postImageSrc:function(){return d["f"].$compose.featuredImage.postImageSrc}}})],w);var I=w,_=I,O=(n("915f"),Object(C["a"])(_,r,a,!1,null,"679a5c7c",null));e["default"]=O.exports},"0cd8":function(t,e,n){"use strict";var r=n("994e"),a=n.n(r);a.a},"18ee":function(t,e,n){},2112:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"GBLMContainer flex"},[n("div",{staticClass:"MC-ViewArea",class:t.MainCB?t.MainCB:t.noSideNav?"xs12":"xs12 lg9",attrs:{id:t.ownID?t.ownID:""}},[t._t("default"),n("Footer")],2),t.noSideNav?t._e():n("div",{staticClass:"hide-lg-down",class:t.SideCB?t.SideCB:"lg3"},[t._t("SideNav")],2)])},a=[],i=n("d4ec"),s=n("bee2"),o=n("262e"),c=n("2caf"),l=n("9ab4"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{directives:[{name:"show",rawName:"v-show",value:!["user-profile","posts"].includes(t.$route.name),expression:"!['user-profile','posts'].includes($route.name)"}],staticClass:"Footer t-blue-grey text-center"},[t._m(0),n("div",{staticClass:"mt-4"},[n("router-link",{staticClass:"t-blue--3 no-deco",attrs:{to:"/privacy"}},[t._v("Privacy")])],1)])},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"icon-copyright mr-4"},[t._v("2020 scavorb")])])}],f=n("60a3"),p=function(t){Object(o["a"])(n,t);var e=Object(c["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return n}(f["c"]);p=Object(l["a"])([Object(f["a"])({})],p);var v=p,m=v,h=(n("0cd8"),n("2877")),g=Object(h["a"])(m,u,d,!1,null,"09bb7d70",null),b=g.exports,C=n("c152"),y=function(t){Object(o["a"])(n,t);var e=Object(c["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n,[{key:"mounted",value:function(){C["d"].$container.element=document.getElementById(this.ownID),C["d"].$container.ScrollingHandler()}}]),n}(f["c"]);Object(l["a"])([Object(f["b"])({required:!1,default:!1})],y.prototype,"noSideNav",void 0),Object(l["a"])([Object(f["b"])({required:!1,default:!1})],y.prototype,"ownID",void 0),Object(l["a"])([Object(f["b"])({required:!1})],y.prototype,"MainCB",void 0),Object(l["a"])([Object(f["b"])({required:!1})],y.prototype,"SideCB",void 0),y=Object(l["a"])([Object(f["a"])({components:{Footer:b}})],y);var j=y,w=j,I=(n("ce0b"),Object(h["a"])(w,r,a,!1,null,null,null));e["a"]=I.exports},"334d":function(t,e,n){"use strict";var r=n("18ee"),a=n.n(r);a.a},"661b":function(t,e,n){},"915f":function(t,e,n){"use strict";var r=n("dac5"),a=n.n(r);a.a},"994e":function(t,e,n){},ce0b:function(t,e,n){"use strict";var r=n("661b"),a=n.n(r);a.a},dac5:function(t,e,n){}}]);
//# sourceMappingURL=chunk-05ef133a.ca488fc2.js.map